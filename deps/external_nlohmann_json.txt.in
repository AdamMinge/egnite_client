# -------------------------------------------------------------------------------------------------- #
# -------------------------------------- Set CMake version ----------------------------------------- #
# -------------------------------------------------------------------------------------------------- #
cmake_minimum_required(VERSION 3.11)
# -------------------------------------------------------------------------------------------------- #
# -------------------------------------- Fetch dependencies ---------------------------------------- #
# -------------------------------------------------------------------------------------------------- #
project(nlohmann_json NONE)

set(prefix_dir @CMAKE_CURRENT_BINARY_DIR@/nlohmann_json)
set(src_dir ${prefix_dir}/src/nlohmann_json)
set(build_dir ${prefix_dir}/src/nlohmann_json-build)
set(install_dir ${prefix_dir}/src/nlohmann_json-install)

include(ExternalProject)
ExternalProject_Add(
    nlohmann_json
    GIT_REPOSITORY      https://github.com/nlohmann/json.git
    GIT_TAG             v3.11.0
    PREFIX              ${prefix_dir}
    CONFIGURE_COMMAND   cd ${build_dir} && ${CMAKE_COMMAND} -G "${CMAKE_GENERATOR}" -DCMAKE_INSTALL_PREFIX=${install_dir} ${src_dir}
    BUILD_COMMAND       cd ${build_dir} && $(MAKE)
    INSTALL_COMMAND     cd ${build_dir} && $(MAKE) install
    TEST_COMMAND        "")
